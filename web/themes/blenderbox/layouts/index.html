{{ define "main" }}

{{ $n_posts := $.Param "recent_posts_number" | default 3 }}
{{/* Define a section to pull recent posts from. For Hugo 0.20 this will default to the section with the most number of pages. */}}
{{ $mainSections := .Site.Params.mainSections | default (slice "post") }}
{{/* Create a variable with that section to use in multiple places. */}}
{{ $section := where .Site.RegularPages "Section" "in" $mainSections }}
{{/* Check to see if the section is defined for ranging through it */}}
{{ $section_count := len $section }}


  <article>
    {{ .Content }}
    
    {{- partial "modules/home/featured-project-12-col.html" . -}}
    {{- partial "modules/home/updates-12-col.html" . -}}
    {{- partial "modules/site-wide/contact-form-12-col.html" . -}}


    <section>
        {{/* Range through the first $n_posts items of the section */}}
        {{ range (first $n_posts $section) }}
          <div>
            <h2><a rel="canonical" href="{{ .Permalink }}" class="link black dim">
              {{/*  {{ .Title }}  */}}
            </a></h2>

            {{/*  {{ .Summary }}  */}}
          </div>
        {{ end }}

      </section>
  </article>

{{ end }}